(function(a){"function"==typeof define&&define.amd?define(a):a()})(function(){'use strict';var a=function(a,b){var c=Math.floor,d=Math.ceil(a),e=c(b);return c(Math.random()*(e-d))+d},b=function(){},c=function(a){return function(b,c){a.run(b,c.next)}},d=function(a){if("function"==typeof a)return a;if(a&&"function"==typeof a.action)return a.action;if(a&&a.action&&"function"==typeof a.action.run)return c(a.action);if(a&&"function"==typeof a.run)return c(a);throw SyntaxError("Task in incorrect syntax",a)},e=function(a){var b=[];return a.forEach(function(a){b.push(d(a))}),b};module.exports={forEachCallbacks:function(a,b,c){if(!Array.isArray(a))throw new TypeError;var d=0,e=function e(){d<a.length?b(a[d],d++,e):c&&c()};e()},doAll:function(a,b,c){if(!Array.isArray(a))throw new TypeError;if(0===a.length)return void(c&&c());var d=0,e=function(){++d===a.length&&c&&c()};a.forEach(function(a,c){b(a,c,e)})},arrayDelete:function(a,b){if(!Array.isArray(a))return!1;var c=a.findIndex(function(a){return b===a});return-1===c?-1:(a.splice(c,1),c)},Stash:function(){this._stash={},this._id=1,this.put=function(a){return this._stash[this._id]=a,this._id++},this.take=function(a){var b=this._stash[a];return this._stash[a]&&delete this._stash[a],0===Object.keys(this._stash).length&&(this._id=1),b},this.see=function(a){return this._stash[a]},this.clear=function(){this._stash={},this._id=1},this.iterate=function(a){var b=this;Object.keys(this._stash).forEach(function(c){a(b._stash[c],c)})},this.isEmpty=function(){return 0===Object.keys(this._stash).length},this.replace=function(a,b){this._stash[a]=b},this.size=function(){return Object.keys(this._stash).length}},randomEl:function(b){if(!Array.isArray(b))throw new TypeError("randomEl input must be of type Array");if(0===b.length)throw new Error("randomEl cannot accept an empty array");return b[a(0,b.length-1)]},randomInt:a,Workflow:function(a){this._tasks=a||[],this._actions=a?e(a):[],this.run=function(a,c){var d=this,e=0,f={};f.next=function(a){e<d._actions.length?d._actions[e++](a,f,e):e===d._actions.length&&(e++,(c||b)(a))},f.exit=function(a){e<d._actions.length&&(e=d._actions.length,f.next(a))},f.abort=function(){e=d._actions.length+1},f.next(a)},this._insertAtIndex=function(a,b){var c=d(b);this._tasks.splice(a,0,b),this._actions.splice(a,0,c)},this.add=function(a){var b=d(a);this._actions.push(b),this._tasks.push(a)},this.insertBefore=function(a,b){var c=this._tasks.findIndex(a);return-1!==c&&this._insertAtIndex(c,b),c},this.insertAfter=function(a,b){var c=this._tasks.findIndex(a);return-1===c?-1:(this._insertAtIndex(c+1,b),c+1)},this.findAndDelete=function(a){var b=this._tasks.findIndex(a);return-1!==b&&(this._actions.splice(b,1),this._tasks.splice(b,1)),b}}}});
